# Umbraco Delivery Api Extensions üß©

[![Downloads](https://img.shields.io/nuget/dt/Umbraco.Community.UmbracoDeliveryApiExtensions?color=cc9900)](https://www.nuget.org/packages/Umbraco.Community.UmbracoDeliveryApiExtensions/)
[![NuGet](https://img.shields.io/nuget/vpre/Umbraco.Community.UmbracoDeliveryApiExtensions?color=0273B3)](https://www.nuget.org/packages/Umbraco.Community.UmbracoDeliveryApiExtensions)
[![GitHub license](https://img.shields.io/github/license/ByteCrumb/Umbraco.Community.DeliveryApiExtensions?color=8AB803)](../LICENSE)

Extensions for the Umbraco Delivery API.

## Features ‚ú®

### Backoffice preview
Preview the Delivery API responses from the backoffice content/media nodes.

![Preview](https://github.com/ByteCrumb/Umbraco.Community.DeliveryApiExtensions/blob/feature/docs/docs/screenshots/api-preview.png?raw=true)

### Typed swagger
Adds types to the Umbraco swagger based on your document and data types (just like Models Builder), so that you can more seamlessly generate typed clients.  

Example of a Node console app using the types/functions generated by a typescript restful client generator using the typed swagger.
```ts
import { getContentItemByPath } from './api/umbraco-api';

const content = (await getContentItemByPath('/')).data;

// Content can be of any document type here

if (content.contentType === 'home') {
    // By checking the contentType, Typescript knows this is a Home page
    // and properly validates the properties and their types
    console.log(`Name: ${content.name}`);
    console.log(`Title: ${content.properties?.title}`);
    console.log(`Text: ${content.properties?.text?.markup}`);
}
```

![Typed Swagger](https://github.com/ByteCrumb/Umbraco.Community.DeliveryApiExtensions/blob/feature/docs/docs/screenshots/typed-swagger-schema.png?raw=true)

## Installation üßë‚Äçüíª

Add the package to an existing Umbraco website (v12.2+) from nuget:

```sh
dotnet add package Umbraco.Community.UmbracoDeliveryApiExtensions
```

### Configuration (appsettings.json)
```jsonc
{
  "DeliveryApiExtensions": {
    "Preview": {
      "Enabled": true,
      "Media": {
        "Enabled": true
      },
      "AllowedUserGroupAliases": [], // All allowed by default
      "ContentAppWeight": -50
    },
    "TypedSwagger": {
      "Enabled": true,
      "Mode": "Auto"
    }
  }
}
```

**Typed swagger modes**  

- **Automatic (Auto)** -  Swagger will be generated with the `UseOneOfForPolymorphism` and `UseAllOfForInheritance` options.  
Suitable for most generators like [openapi-typescript](https://openapi-ts.pages.dev) and [orval](https://orval.dev).

- **Compatibility** - Swagger will be generated with only the `UseAllOfForInheritance` option enabled.  
Suitable for generators that don't support polymorphism using OneOf like [NSwag](https://github.com/RicoSuter/NSwag).

- **Manual** - Swagger options will not be configured, allowing full customization.  
It can be configured from your codebase using:
    ```csharp
    services.Configure<SwaggerGenOptions>(options => ...)
    services.Configure<TypedSwaggerOptions>(options => ...)
    ```

## Contributing üôå

Contributions to this package are most welcome! Please read the [Contributing Guidelines](https://github.com/ByteCrumb/Umbraco.Community.DeliveryApiExtensions/blob/main/.github/CONTRIBUTING.md).
