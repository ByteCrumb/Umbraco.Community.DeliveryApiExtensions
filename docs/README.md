# Umbraco Delivery Api Extensions 🧩

[![Downloads](https://img.shields.io/nuget/dt/Umbraco.Community.UmbracoDeliveryApiExtensions?color=cc9900)](https://www.nuget.org/packages/Umbraco.Community.UmbracoDeliveryApiExtensions/)
[![NuGet](https://img.shields.io/nuget/vpre/Umbraco.Community.UmbracoDeliveryApiExtensions?color=0273B3)](https://www.nuget.org/packages/Umbraco.Community.UmbracoDeliveryApiExtensions)
[![GitHub license](https://img.shields.io/github/license/ByteCrumb/Umbraco.Community.DeliveryApiExtensions?color=8AB803)](../LICENSE)

Extensions for the Umbraco Delivery API.

## Features ✨
**Typed swagger** - Adds types to the Umbraco swagger based on your document and data types, so that you can more seamlessly generate typed clients.  

Example of a Node console app using the types/functions generated by `Orval` (a typescript restful client generator) using the typed swagger.
```ts
import {getContentItemByPath} from './api/umbraco-api';

(async () => {
  const content = (await getContentItemByPath('/', {expand: 'all'})).data;

  if (content.contentType === 'home') {
    console.log(`Name: ${content.name}`);
    console.log(`Title: ${content.properties?.title}`);
    console.log(`Text: ${content.properties?.text?.markup}`);
  }
})();
```

**Backoffice preview** - Preview the Delivery API responses from the backoffice content/media nodes.

![Preview](https://github.com/ByteCrumb/Umbraco.Community.DeliveryApiExtensions/blob/feature/docs/docs/screenshots/screenshot1.png?raw=true)

## Installation 🧑‍💻

Add the package to an existing Umbraco website (v12.2+) from nuget:

```sh
dotnet add package Umbraco.Community.UmbracoDeliveryApiExtensions
```

### Configuration (appsetttings.json)
```json
{
  "DeliveryApiExtensions": {
    "Preview": {
      "Enabled": true,
      "Media": {
        "Enabled": true
      },
      "AllowedUserGroupAliases": [],
      "ContentAppWeight": 0
    },
    "TypedSwagger": {
      "Enabled": true,
      "Mode": "Auto"
    }
  }
}
```

- **Preview**
    - `Enabled` - Enables the Preview content app for Content. Defaults to `true`.
    - `Media` > `Enabled` - Enables the Preview content app for Content. Defaults to `true`.
    - `AllowedUserGroupAliases` - The aliases of the user groups that should be able to see the Preview content app. Defaults to `[]`, which means all.
    - `ContentAppWeight` - Adjust the position of the Preview content app. Defaults to `0`.
- **TypedSwagger**
    - `Enabled` - Enables the typed swagger feature. Defaults to `true`.
    - `Mode` - `Auto` or `Manual`. If set to `Auto`, the swagger will be generated with the `UseOneOfForPolymorphism` and `UseAllOfForInheritance` options. Defaults to `Auto`.  
    **Note:** Depending on the consumer, the configuration set by `Mode: Auto` might not be ideal. To configure them yourself, set this to `Manual` and call the following from your code: `services.Configure<SwaggerGenOptions></SwaggerGenOptions>(options => ...)`.

## Contributing 🙌

Contributions to this package are most welcome! Please read the [Contributing Guidelines](https://github.com/ByteCrumb/Umbraco.Community.DeliveryApiExtensions/blob/main/.github/CONTRIBUTING.md).
